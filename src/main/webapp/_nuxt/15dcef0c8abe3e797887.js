(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{354:function(t,e,r){var content=r(386);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("5250b952",content,!1,{sourceMap:!1})},355:function(t,e,r){var content=r(388);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("8ec8ff7c",content,!1,{sourceMap:!1})},356:function(t,e,r){var content=r(390);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("950dcaa4",content,!1,{sourceMap:!1})},357:function(t,e,r){var content=r(392);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("4d934f56",content,!1,{sourceMap:!1})},358:function(t,e,r){var content=r(394);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("77bf9ba4",content,!1,{sourceMap:!1})},385:function(t,e,r){"use strict";var n=r(354);r.n(n).a},386:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,"@-webkit-keyframes spinAround-data-v-10be2b5c{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround-data-v-10be2b5c{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.c-vert-center[data-v-10be2b5c]{display:-webkit-box!important;display:flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-center[data-v-10be2b5c]>:nth-child(2){margin-left:4px!important}.c-vert-inline-center[data-v-10be2b5c]{display:-webkit-inline-box!important;display:inline-flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-inline-center[data-v-10be2b5c]>:nth-child(2){margin-left:4px!important}table tbody tr td[data-v-10be2b5c],table thead tr td[data-v-10be2b5c]{vertical-align:middle!important}.services-modal[data-v-10be2b5c]{width:auto;min-width:90%}@media (min-width:768px){.services-modal[data-v-10be2b5c]{min-width:760px}}.services-modal-foot[data-v-10be2b5c]{-webkit-box-pack:justify;justify-content:space-between}.parents-service[data-v-10be2b5c]:nth-child(n+2){margin-top:2px}.parents-service-btn[data-v-10be2b5c]{width:100%;position:relative;border-radius:4px;padding:8px 32px 8px 8px;border:1px solid #dbdbdb}.parents-service-btn.is-selected[data-v-10be2b5c]{background-color:#67b945;color:#fff;border:1px solid #67b945}.parents-service-btn[data-v-10be2b5c]:hover{cursor:pointer}.parents-service-btn .icon[data-v-10be2b5c]{position:absolute;right:8px;top:0;bottom:0;margin:auto}.border-right[data-v-10be2b5c]{border-right:1px solid #dbdbdb}.children[data-v-10be2b5c]{padding-left:16px}.services[data-v-10be2b5c]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.service-name[data-v-10be2b5c]{padding-right:12px}",""])},387:function(t,e,r){"use strict";var n=r(355);r.n(n).a},388:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,"@-webkit-keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.c-vert-center{display:-webkit-box!important;display:flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-center>:nth-child(2){margin-left:4px!important}.c-vert-inline-center{display:-webkit-inline-box!important;display:inline-flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-inline-center>:nth-child(2){margin-left:4px!important}table tbody tr td,table thead tr td{vertical-align:middle!important}.services-modal .b-checkbox{padding:4px 0}.services-modal .b-checkbox .control-label{width:100%}",""])},389:function(t,e,r){"use strict";var n=r(356);r.n(n).a},390:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,"@-webkit-keyframes spinAround-data-v-24fc9e30{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround-data-v-24fc9e30{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.c-vert-center[data-v-24fc9e30]{display:-webkit-box!important;display:flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-center[data-v-24fc9e30]>:nth-child(2){margin-left:4px!important}.c-vert-inline-center[data-v-24fc9e30]{display:-webkit-inline-box!important;display:inline-flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-inline-center[data-v-24fc9e30]>:nth-child(2){margin-left:4px!important}table tbody tr td[data-v-24fc9e30],table thead tr td[data-v-24fc9e30]{vertical-align:middle!important}.inform-modal[data-v-24fc9e30]{width:auto;min-width:90%}@media (min-width:768px){.inform-modal[data-v-24fc9e30]{min-width:760px}}.inform-modal-foot[data-v-24fc9e30]{-webkit-box-pack:center;justify-content:center}",""])},391:function(t,e,r){"use strict";var n=r(357);r.n(n).a},392:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,"@-webkit-keyframes spinAround-data-v-3ea1e5d3{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround-data-v-3ea1e5d3{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.c-vert-center[data-v-3ea1e5d3]{display:-webkit-box!important;display:flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-center[data-v-3ea1e5d3]>:nth-child(2){margin-left:4px!important}.c-vert-inline-center[data-v-3ea1e5d3]{display:-webkit-inline-box!important;display:inline-flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-inline-center[data-v-3ea1e5d3]>:nth-child(2){margin-left:4px!important}table tbody tr td[data-v-3ea1e5d3],table thead tr td[data-v-3ea1e5d3]{vertical-align:middle!important}.selected-services-wrapper[data-v-3ea1e5d3]{border:1px solid #dbdbdb;border-radius:4px;padding:8px;min-height:2rem;flex-wrap:wrap}",""])},393:function(t,e,r){"use strict";var n=r(358);r.n(n).a},394:function(t,e,r){(t.exports=r(18)(!1)).push([t.i,"@-webkit-keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.c-vert-center{display:-webkit-box!important;display:flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-center>:nth-child(2){margin-left:4px!important}.c-vert-inline-center{display:-webkit-inline-box!important;display:inline-flex!important;-webkit-box-align:center!important;align-items:center!important}.c-vert-inline-center>:nth-child(2){margin-left:4px!important}table tbody tr td,table thead tr td{vertical-align:middle!important}.selected-services-wrapper label.label{font-size:.85rem!important;background-color:#fff!important}.selected-service+.selected-service{margin-left:8px}",""])},425:function(t,e,r){"use strict";r.r(e);r(93),r(94),r(14),r(43),r(24),r(122),r(123);function n(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o={props:{open:{type:Boolean,required:!0},data:{type:Array,required:!0},selectedServices:{type:Array,required:!0}},data:function(){return{isOpen:this.open,selectParentId:1,parentCheckbox:!1,childrenCheckbox:this.selectedServices||[]}},computed:{allChildren:function(){return this.data.reduce((function(t,e){return[].concat(n(t),n(e.children))}),[])},parents:function(){return this.data},selectedParent:function(){var t=this;return this.data.filter((function(e){return e.id===t.selectParentId}))[0]||this.data[0]},children:function(){var t=this;return this.data.filter((function(e){return e.id===t.selectParentId}))[0].children},totalTime:function(){var t=this;return this.childrenCheckbox.reduce((function(e,r){var n=t.allChildren.filter((function(t){return t.id===r}))[0];return n?e+(n.time||0):e}),0)},totalTimeFormat:function(){return this.minutesToHours(this.totalTime)||"0m"},totalMoney:function(){var t=this;return this.childrenCheckbox.reduce((function(e,r){var n=t.allChildren.filter((function(t){return t.id===r}))[0];return n?e+(n.money||0):e}),0)},totalMoneyFormat:function(){return"$".concat(this.totalMoney)}},watch:{isOpen:function(t){this.$emit("update:open",t)},open:function(t){this.isOpen=t},childrenCheckbox:function(t){this.judgeParentCheckbox(t)}},methods:{chooseParentService:function(t){this.selectParentId=t,this.judgeParentCheckbox()},checkAllChildren:function(t){var e=this;this.childrenCheckbox=t?[].concat(n(this.childrenCheckbox),n(this.children.map((function(t){return t.id})))):this.childrenCheckbox.filter((function(t){return!e.children.map((function(t){return t.id})).includes(t)}))},parentCheckboxEvent:function(t){this.parentCheckbox=t,this.checkAllChildren(t)},judgeParentCheckbox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.childrenCheckbox,e=!0;this.children.map((function(r){t.includes(r.id)||(e=!1)})),this.parentCheckbox=e},minutesToHours:function(t){var e=Math.floor(t/60),r=t%60,n="";return e&&(n+="".concat(e,"h")),r&&(n+=" ".concat(r,"m")),n.trim()},save:function(){var t=this,e=this.allChildren.filter((function(e){return t.childrenCheckbox.includes(e.id)}));this.$emit("save",e),this.close()},close:function(){this.$refs.servicesModalRef.close()}}},c=(r(385),r(387),r(7)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"servicesModalRef",attrs:{active:t.isOpen,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.isOpen=e}}},[r("div",{staticClass:"services-modal modal-card",staticStyle:{width:"auto"}},[r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title"},[t._v(t._s(t.$t("services")))])]),t._v(" "),r("section",{staticClass:"modal-card-body"},[r("div",{staticClass:"columns is-mobile"},[r("div",{staticClass:"border-right column is-6"},t._l(t.parents,(function(e){return r("div",{key:e.id,staticClass:"parents-service"},[r("p",{staticClass:"parents-service-btn",class:{"is-selected":t.selectParentId===e.id},on:{click:function(){return t.chooseParentService(e.id)}}},[r("span",[t._v(t._s(e.name))]),t._v(" "),r("b-icon",{attrs:{icon:"greater-than",size:"is-small"}})],1)])})),0),t._v(" "),r("div",{staticClass:"column is-6"},[r("b-checkbox",{staticClass:"has-text-weight-semibold",on:{input:t.parentCheckboxEvent},model:{value:t.parentCheckbox,callback:function(e){t.parentCheckbox=e},expression:"parentCheckbox"}},[t._v(t._s(t.selectedParent.name))]),t._v(" "),r("div",{staticClass:"children"},t._l(t.children,(function(e){return r("p",{key:e.id},[r("b-checkbox",{staticClass:"is-flex",attrs:{"native-value":e.id},model:{value:t.childrenCheckbox,callback:function(e){t.childrenCheckbox=e},expression:"childrenCheckbox"}},[r("div",{staticClass:"services"},[r("div",{staticClass:"service-name"},[r("p",{staticClass:"has-text-weight-medium"},[t._v(t._s(e.name))]),t._v(" "),r("p",{staticClass:"is-size-7 has-text-grey"},[t._v(t._s(t.minutesToHours(e.time)))])]),t._v(" "),r("div",{staticClass:"is-flex"},[r("p",{staticClass:"has-text-weight-medium"},[t._v(t._s("$"+(e.money||0)))])])])])],1)})),0)],1)])]),t._v(" "),r("footer",{staticClass:"services-modal-foot modal-card-foot"},[r("div",{staticClass:"services-selected"},[r("p",[t._v(t._s(t.$t("money",{money:t.totalMoneyFormat})))]),t._v(" "),r("p",[t._v(t._s(t.$t("timing",{time:t.totalTimeFormat})))])]),t._v(" "),r("div",[r("b-button",{on:{click:t.close}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),r("b-button",{attrs:{type:"is-primary"},on:{click:t.save}},[t._v(t._s(t.$t("ok")))])],1)])])])}),[],!1,null,"10be2b5c",null).exports,d={props:{open:{type:Boolean,required:!0},title:{type:String,default:function(){return""}},msg:{type:String,default:function(){return""}},html:{type:String,default:function(){return""}}},data:function(){return{isOpen:this.open}},watch:{isOpen:function(t){this.$emit("update:open",t)},open:function(t){this.isOpen=t}},methods:{close:function(){this.$refs.informModalRef.close()}}},m=(r(389),Object(c.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"informModalRef",attrs:{active:t.isOpen,"has-modal-card":"","trap-focus":"","aria-role":"dialog","aria-modal":""},on:{"update:active":function(e){t.isOpen=e}}},[r("div",{staticClass:"inform-modal modal-card",staticStyle:{width:"auto"}},[t.$slots.header?r("header",{staticClass:"modal-card-head"},[t._t("header")],2):r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]),t._v(" "),t.$slots.default?r("section",{staticClass:"modal-card-body"},[t._t("default")],2):r("section",{staticClass:"modal-card-body"},[r("div",{staticClass:"columns"},[t.msg?r("div",{staticClass:"column is-12"},[t._v(t._s(t.msg))]):t.html?r("div",{staticClass:"column is-12",domProps:{innerHTML:t._s(t.html)}}):t._e()])]),t._v(" "),t.$slots.footer?r("footer",{staticClass:"modal-card-foot"},[t._t("footer")],2):r("footer",{staticClass:"inform-modal-foot modal-card-foot"},[r("b-button",{attrs:{type:"is-primary"},on:{click:t.close}},[t._v(t._s(t.$t("ok")))])],1)])])}),[],!1,null,"24fc9e30",null).exports),f=r(20),v=r(26),h={components:{SelectServiceDialog:l,InformDialog:m},data:function(){return{isOpenServiceDialog:!1,isOpenAfterAddServiceDialog:!1,selectedServices:[],isAppointment:0,informDialogInfo:{}}},computed:{tbcover:function(){var t=[{field:"point",label:this.$t("point")},{field:"reward",label:this.$t("reward")},{field:"infor",label:this.$t("info")}];return{rows:this.informDialogInfo.tbcover,columns:t}}},asyncData:function(t){var e,r,n,o,c,l,d;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e=t.$axios,r=t.store,m.prev=1,n=[],m.next=5,regeneratorRuntime.awrap(e.get(f.a.getListService));case 5:return(o=m.sent).data&&(n=o.data.map((function(t){return{id:t.ser_id,name:t.name,children:t.service.map((function(s){return{id:s.id,name:s.name,shortName:s.s_name,time:parseFloat(s.time),money:parseInt(s.money),note:s.note}}))}}))),c=r.state.loginCustomer.name,l=r.state.loginCustomer.msg,d=r.state.loginCustomer.phone,m.abrupt("return",{name:c,msg:l,phone:d,services:n});case 13:m.prev=13,m.t0=m.catch(1),console.log("TCL: Data -> error",m.t0);case 16:case"end":return m.stop()}}),null,null,[[1,13]])},methods:{openServiceDialog:function(){this.isOpenServiceDialog=!0},saveServices:function(){var t,e=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,this.selectedServices&&0!==this.selectedServices.length){r.next=4;break}return this.$buefy.toast.open({message:this.$t("messages.validate_select_service"),type:"is-danger"}),r.abrupt("return");case 4:return r.next=6,regeneratorRuntime.awrap(this.$axios.post(f.a.chooseService,{phone:this.phone,appointment:this.isAppointment,service:this.selectedServices.map((function(s){return s.id.toString()}))}));case 6:(t=r.sent).data&&(this.informDialogInfo=t.data,this.isOpenAfterAddServiceDialog=!0,t.data.alert||(console.log("saveServices -> res.data.alert",t.data.alert),setTimeout((function(){e.$router.push("/user/login")}),1e4))),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log("TCL: saveServices -> error",r.t0);case 13:case"end":return r.stop()}}),null,this,[[0,10]])},selectServices:function(t){this.selectedServices=t},closeInformModal:function(){this.$refs.informDialogRef.close()},redirectToLogin:function(){this.$router.push("/user/login")},yes:function(){var t;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v.a.replaceSkeleton(f.a.usingReward,{phone:this.phone}),e.next=4,regeneratorRuntime.awrap(this.$axios.get(t));case 4:this.redirectToLogin(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("TCL: yes -> error",e.t0);case 10:case"end":return e.stop()}}),null,this,[[0,7]])}}},x=(r(391),r(393),Object(c.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("h2",{staticClass:"title has-text-centered"},[t._v(t._s(t.$t("welcome",{name:t.name})))]),t._v(" "),r("h3",{staticClass:"subtitle has-text-centered has-text-danger"},[t._v(t._s(t.msg))]),t._v(" "),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("p",[t._v(t._s(t.$t("please_choose_services")))]),t._v(" "),r("b-button",{attrs:{type:"is-primary"},on:{click:t.openServiceDialog}},[t._v(t._s(t.$t("services")))])],1),t._v(" "),r("div",{staticClass:"column is-12"},[r("b-field",{staticClass:"selected-services-wrapper",attrs:{label:t.$t("selected_services"),"label-position":"on-border"}},[t.selectedServices.length>0?t._l(t.selectedServices,(function(e){return r("b-tag",{key:e.id,staticClass:"selected-service"},[t._v(t._s(e.name))])})):[r("p",{staticClass:"has-text-centered"},[t._v(t._s(t.$t("nothing")))])]],2)],1),t._v(" "),r("div",{staticClass:"column is-12"},[r("b-checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.isAppointment,callback:function(e){t.isAppointment=e},expression:"isAppointment"}},[t._v(t._s(t.$t("do_you_have_appointment")))])],1),t._v(" "),r("div",{staticClass:"column is-12"},[r("b-button",{attrs:{type:"is-primary"},on:{click:t.saveServices}},[t._v(t._s(t.$t("save_services")))])],1)]),t._v(" "),r("div",{staticClass:"dialog-wrapper"},[r("select-service-dialog",{attrs:{open:t.isOpenServiceDialog,"selected-services":t.selectedServices,data:t.services},on:{"update:open":function(e){t.isOpenServiceDialog=e},save:t.selectServices}}),t._v(" "),r("inform-dialog",{ref:"informDialogRef",attrs:{open:t.isOpenAfterAddServiceDialog},on:{"update:open":function(e){t.isOpenAfterAddServiceDialog=e}}},[r("template",{slot:"header"},[r("p",{staticClass:"modal-card-title has-text-centered"},[t._v(t._s(t.$t("you_done")))])]),t._v(" "),[r("div",{staticClass:"column is-12"},[r("h3",{staticClass:"has-text-danger has-text-centered"},[t._v(t._s(t.informDialogInfo.msg))])]),t._v(" "),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-12"},[r("h3",{staticClass:"has-text-danger has-text-centered"},[t._v(t._s(t.$t("table_convert")))]),t._v(" "),r("b-table",{attrs:{data:t.tbcover.rows,columns:t.tbcover.columns}})],1)])],t._v(" "),r("template",{slot:"footer"},[r("div",{staticStyle:{"justify-content":"flex-start"}},[t._v(t._s(t.informDialogInfo.alert))]),t._v(" "),r("div",{staticStyle:{"justify-content":"flex-end"}},[t.informDialogInfo.alert?t._e():r("b-button",{on:{click:t.closeInformModal}},[t._v(t._s(t.$t("ok")))]),t._v(" "),t.informDialogInfo.alert?r("b-button",{on:{click:t.redirectToLogin}},[t._v(t._s(t.$t("no")))]):t._e(),t._v(" "),t.informDialogInfo.alert?r("b-button",{attrs:{type:"is-primary"},on:{click:t.yes}},[t._v(t._s(t.$t("yes")))]):t._e()],1)])],2)],1)])}),[],!1,null,"3ea1e5d3",null));e.default=x.exports}}]);